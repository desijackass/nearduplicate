from os import listdir, getcwd
from os.path import isfile, join, abspath
from nltk.corpus import stopwords
from itertools import combinations

path='../corpus/bbc/tech1'
mypath=abspath(join(getcwd(), path))


def getFileNames(mypath):
    return [join(mypath,f) for f in listdir(mypath) if isfile(join(mypath, f)) and f[-1]!='~']

def readFile(name):
    with open(name, 'r') as f:
        return f.read()

def normalize(mypath):
    corpus={}
    for item in getFileNames(mypath):
        f=readFile(item).split()
        stop = stopwords.words('english')
        corpus[item] = [w for w in f if w.lower() not in stop]
        print item, float(len(corpus[item]))/len(f)
    return corpus
    
def test():
    corpus=normalize(mypath)
    for item1, item2 in combinations(corpus.keys(),2):
        set1 = set(corpus[item1])
        set2 = set(corpus[item2])
        print item1, item2, float(len(set1 & set2))/len(set1|set2)
if __name__=='__main__':
    normalize(mypath)
